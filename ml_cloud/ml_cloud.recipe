Bootstrap: docker
From: ubuntu:focal

%files
   requirements.txt

%post
   echo "Hello from inside the container"
   export DEBIAN_FRONTEND=noninteractive
   mount
   ls $HOME
   apt update -y
   apt install -y python3 python3-distutils python3-apt python3-dev curl libblas-dev liblapack-dev  libsox-dev git-lfs build-essential python3-pip vim libglx-dev libgl1
   apt install -y libglib2.0-0 libglx0 libx11-6 libpcre3 libxdmcp6 libglvnd0 libxcb1 libxau6 libbsd0
   ln -s /usr/bin/python3 /usr/bin/python
   python3 -m pip install setuptools==59.5.0
   python3 -m pip install numpy==1.19.5
   python3 -m pip install -r /requirements.txt
   python3 -m pip install --force-reinstall setuptools==59.5.0

   rm -rf ~/.cache
   apt-get clean -y
